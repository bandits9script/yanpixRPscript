-- Bandits9Script GUI ‚Äî –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á–∏–π AimBot
-- LocalScript –¥–ª—è StarterPlayerScripts

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local Workspace = game:GetService("Workspace")
local VirtualInputManager = game:GetService("VirtualInputManager")
local TweenService = game:GetService("TweenService")

local player = Players.LocalPlayer
local mouse = player:GetMouse()

player:WaitForChild("PlayerGui")

-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏
local settings = {
    Enabled = false,
    FOV = 100,
    VisibleCheck = false,
    AutoShoot = true,
    ShootDelay = 0.1,
    AimAtHead = true,
    KillAllEnabled = false,
    ChamsEnabled = false
}

-- ========== GUI ==========
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "BANDITS9SCRIPT_GUI"
ScreenGui.Parent = player.PlayerGui
ScreenGui.ResetOnSpawn = false
ScreenGui.DisplayOrder = 999

local MainFrame = Instance.new("Frame")
MainFrame.Name = "MainFrame"
MainFrame.Size = UDim2.new(0, 360, 0, 250)
MainFrame.Position = UDim2.new(0.5, -180, 0.5, -125)
MainFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 40)
MainFrame.BackgroundTransparency = 0.1
MainFrame.BorderSizePixel = 0
MainFrame.Parent = ScreenGui

local UICorner = Instance.new("UICorner")
UICorner.CornerRadius = UDim.new(0, 10)
UICorner.Parent = MainFrame

local UIStroke = Instance.new("UIStroke")
UIStroke.Color = Color3.fromRGB(255, 255, 255)
UIStroke.Thickness = 2
UIStroke.Parent = MainFrame

-- Header
local Title = Instance.new("TextLabel")
Title.Size = UDim2.new(1, 0, 0, 28)
Title.Position = UDim2.new(0, 0, 0, 0)
Title.BackgroundColor3 = Color3.fromRGB(30, 30, 60)
Title.BackgroundTransparency = 0.2
Title.Text = "BANDITS9SCRIPT‚Ñ¢"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.Font = Enum.Font.SourceSansBold
Title.TextSize = 16
Title.BorderSizePixel = 0
Title.Parent = MainFrame

-- –û–±–≤–æ–¥–∫–∞ –¥–ª—è —Ç–µ–∫—Å—Ç–∞ –∑–∞–≥–æ–ª–æ–≤–∫–∞
local TitleTextStroke = Instance.new("UIStroke")
TitleTextStroke.Color = Color3.fromRGB(0, 0, 0)
TitleTextStroke.Thickness = 2
TitleTextStroke.Parent = Title

local TitleCorner = Instance.new("UICorner")
TitleCorner.CornerRadius = UDim.new(0, 8)
TitleCorner.Parent = Title

local TitleStroke = Instance.new("UIStroke")
TitleStroke.Color = Color3.fromRGB(255, 255, 255)
TitleStroke.Thickness = 1
TitleStroke.Parent = Title

-- Left tabs
local TabsFrame = Instance.new("Frame")
TabsFrame.Size = UDim2.new(0, 100, 1, -34)
TabsFrame.Position = UDim2.new(0, 8, 0, 34)
TabsFrame.BackgroundTransparency = 1
TabsFrame.Parent = MainFrame

local tabNames = {"Main", "Legit", "ESP/CHAMS", "Credits"}
local tabButtons = {}
for i, name in ipairs(tabNames) do
    local btn = Instance.new("TextButton")
    btn.Name = name .. "Tab"
    btn.Size = UDim2.new(1, 0, 0, 30)
    btn.Position = UDim2.new(0, 0, 0, (i-1)*35)
    btn.BackgroundColor3 = Color3.fromRGB(40, 40, 80)
    btn.Text = name
    btn.Font = Enum.Font.SourceSansBold
    btn.TextSize = 12
    btn.TextColor3 = Color3.fromRGB(255, 255, 255)
    btn.BorderSizePixel = 0
    btn.Parent = TabsFrame
    
    local btnTextStroke = Instance.new("UIStroke")
    btnTextStroke.Color = Color3.fromRGB(0, 0, 0)
    btnTextStroke.Thickness = 2
    btnTextStroke.Parent = btn
    
    local c = Instance.new("UICorner"); c.CornerRadius = UDim.new(0,6); c.Parent = btn
    local stroke = Instance.new("UIStroke")
    stroke.Color = Color3.fromRGB(255, 255, 255)
    stroke.Thickness = 1
    stroke.Parent = btn
    tabButtons[name] = btn
end

-- Right content area
local ContentFrame = Instance.new("Frame")
ContentFrame.Size = UDim2.new(1, -116, 1, -34)
ContentFrame.Position = UDim2.new(0, 108, 0, 34)
ContentFrame.BackgroundTransparency = 1
ContentFrame.Parent = MainFrame

-- Create pages
local pages = {}
for _, name in ipairs(tabNames) do
    local page = Instance.new("Frame")
    page.Name = name .. "Page"
    page.Size = UDim2.new(1, 0, 1, 0)
    page.Position = UDim2.new(0, 0, 0, 0)
    page.BackgroundTransparency = 1
    page.Visible = false
    page.Parent = ContentFrame
    pages[name] = page
end
pages["Main"].Visible = true

-- Helper to create buttons
local buttonInstances = {}

local function addButtonToPage(page, name, x, y, w, h, textSize)
    local btn = Instance.new("TextButton")
    btn.Name = name:gsub(" ", "_")
    btn.Size = UDim2.new(0, w or 140, 0, h or 30)
    btn.Position = UDim2.new(0, x or 0, 0, y or 0)
    btn.BackgroundColor3 = Color3.fromRGB(120, 30, 30)
    btn.Text = name
    btn.TextColor3 = Color3.fromRGB(255, 255, 255)
    btn.Font = Enum.Font.SourceSansBold
    btn.TextSize = textSize or 14
    btn.BorderSizePixel = 0
    btn.Parent = page
    
    local btnTextStroke = Instance.new("UIStroke")
    btnTextStroke.Color = Color3.fromRGB(0, 0, 0)
    btnTextStroke.Thickness = 2
    btnTextStroke.Parent = btn
    
    local uc = Instance.new("UICorner"); uc.CornerRadius = UDim.new(0,8); uc.Parent = btn
    local stroke = Instance.new("UIStroke")
    stroke.Color = Color3.fromRGB(255, 255, 255)
    stroke.Thickness = 2
    stroke.Parent = btn
    buttonInstances[name] = btn
    return btn
end

-- Layout buttons
addButtonToPage(pages["Main"], "AIMBOT: OFF", 10, 8, 160, 32, 14)
addButtonToPage(pages["Main"], "KILL ALL: OFF", 10, 52, 160, 32, 14)

addButtonToPage(pages["Legit"], "WALL CHECK: OFF", 10, 8, 160, 32, 14)
addButtonToPage(pages["Legit"], "SPEED: OFF", 10, 52, 160, 32, 14)
addButtonToPage(pages["Legit"], "SPIN: OFF", 10, 96, 160, 32, 14)

-- –ö–Ω–æ–ø–∫–∏ –¥–ª—è ESP/CHAMS
addButtonToPage(pages["ESP/CHAMS"], "CHAMS: OFF", 10, 8, 160, 32, 14)

-- Credits page
local creditsLabel = Instance.new("TextLabel")
creditsLabel.Size = UDim2.new(1, -12, 1, -12)
creditsLabel.Position = UDim2.new(0, 6, 0, 6)
creditsLabel.BackgroundTransparency = 1
creditsLabel.Text = "BANDITS9SCRIPT‚Ñ¢\n\nVersion 2.0\n\nCreated by Bandit"
creditsLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
creditsLabel.Font = Enum.Font.SourceSansBold
creditsLabel.TextSize = 16
creditsLabel.TextWrapped = true
creditsLabel.TextYAlignment = Enum.TextYAlignment.Top
creditsLabel.Parent = pages["Credits"]

local creditsTextStroke = Instance.new("UIStroke")
creditsTextStroke.Color = Color3.fromRGB(0, 0, 0)
creditsTextStroke.Thickness = 2
creditsTextStroke.Parent = creditsLabel

local creditsStroke = Instance.new("UIStroke")
creditsStroke.Color = Color3.fromRGB(255, 255, 255)
creditsStroke.Thickness = 2
creditsStroke.Parent = creditsLabel

-- FOV circle
local FOVCircle = Instance.new("Frame")
FOVCircle.Name = "FOVCircle"
FOVCircle.Size = UDim2.new(0, settings.FOV * 2, 0, settings.FOV * 2)
FOVCircle.Position = UDim2.new(0, mouse.X - settings.FOV, 0, mouse.Y - settings.FOV)
FOVCircle.BackgroundColor3 = Color3.fromRGB(255, 50, 50)
FOVCircle.BackgroundTransparency = 0.9
FOVCircle.BorderSizePixel = 0
FOVCircle.Visible = true
FOVCircle.Parent = ScreenGui
local CircleCorner = Instance.new("UICorner"); CircleCorner.CornerRadius = UDim.new(1,0); CircleCorner.Parent = FOVCircle
local CircleStroke = Instance.new("UIStroke"); CircleStroke.Color = Color3.fromRGB(255, 255, 255); CircleStroke.Thickness = 2; CircleStroke.Parent = FOVCircle

-- ========== HIGHLIGHT CHAMS –°–ò–°–¢–ï–ú–ê ==========
local chamsEnabled = false
local highlightFolder = Instance.new("Folder")
highlightFolder.Name = "HighlightFolder"
highlightFolder.Parent = ScreenGui

local playerHighlights = {}
local damageConnections = {}
local lastHealthValues = {}

-- –¶–≤–µ—Ç–∞ –¥–ª—è Highlight
local normalHighlightColor = Color3.fromRGB(180, 120, 255) -- –ú—è–≥–∫–∏–π —Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π
local damageHighlightColor = Color3.fromRGB(255, 80, 80)   -- –ö—Ä–∞—Å–Ω—ã–π –ø—Ä–∏ —É—Ä–æ–Ω–µ

local function createHighlight(character, player)
    if not character then return end
    
    -- –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–π highlight –µ—Å–ª–∏ –µ—Å—Ç—å
    if playerHighlights[player] then
        playerHighlights[player]:Destroy()
        playerHighlights[player] = nil
    end
    
    -- –°–æ–∑–¥–∞–µ–º Highlight
    local highlight = Instance.new("Highlight")
    highlight.Name = "Highlight_" .. player.Name
    highlight.Adornee = character
    highlight.FillColor = normalHighlightColor
    highlight.FillTransparency = 0.7
    highlight.OutlineColor = normalHighlightColor
    highlight.OutlineTransparency = 0.3
    highlight.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
    highlight.Parent = highlightFolder
    
    playerHighlights[player] = highlight
    lastHealthValues[player] = character:FindFirstChild("Humanoid") and character.Humanoid.Health or 100
    
    -- –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º —É—Ä–æ–Ω (—Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ HP —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è)
    local humanoid = character:WaitForChild("Humanoid")
    damageConnections[player] = humanoid.HealthChanged:Connect(function(newHealth)
        local oldHealth = lastHealthValues[player] or newHealth
        
        -- –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ HP –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —É–º–µ–Ω—å—à–∏–ª–æ—Å—å (–∏–≥—Ä–æ–∫ –ø–æ–ª—É—á–∏–ª —É—Ä–æ–Ω)
        if newHealth < oldHealth then
            -- –ò–≥—Ä–æ–∫ –ø–æ–ª—É—á–∏–ª —É—Ä–æ–Ω - –º–µ–Ω—è–µ–º —Ü–≤–µ—Ç –Ω–∞ –∫—Ä–∞—Å–Ω—ã–π
            if playerHighlights[player] and playerHighlights[player].Parent then
                playerHighlights[player].FillColor = damageHighlightColor
                playerHighlights[player].OutlineColor = damageHighlightColor
                
                -- –í–æ–∑–≤—Ä–∞—â–∞–µ–º –æ–±—ã—á–Ω—ã–π —Ü–≤–µ—Ç —á–µ—Ä–µ–∑ 1.25 —Å–µ–∫—É–Ω–¥—ã
                task.delay(1.25, function()
                    if playerHighlights[player] and playerHighlights[player].Parent then
                        playerHighlights[player].FillColor = normalHighlightColor
                        playerHighlights[player].OutlineColor = normalHighlightColor
                    end
                end)
            end
        end
        
        -- –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ—Å–ª–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ HP
        lastHealthValues[player] = newHealth
    end)
end

local function removeHighlight(player)
    if playerHighlights[player] then
        playerHighlights[player]:Destroy()
        playerHighlights[player] = nil
    end
    
    if damageConnections[player] then
        damageConnections[player]:Disconnect()
        damageConnections[player] = nil
    end
    
    lastHealthValues[player] = nil
end

local function enableChams()
    chamsEnabled = true
    highlightFolder:ClearAllChildren()
    playerHighlights = {}
    damageConnections = {}
    lastHealthValues = {}
    
    -- –°–æ–∑–¥–∞–µ–º highlights –¥–ª—è –≤—Å–µ—Ö —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∏–≥—Ä–æ–∫–æ–≤
    for _, otherPlayer in pairs(Players:GetPlayers()) do
        if otherPlayer ~= Players.LocalPlayer and otherPlayer.Character then
            createHighlight(otherPlayer.Character, otherPlayer)
        end
    end
    
    -- –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º –ø–æ—è–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –∏–≥—Ä–æ–∫–æ–≤
    Players.PlayerAdded:Connect(function(newPlayer)
        newPlayer.CharacterAdded:Connect(function(character)
            if chamsEnabled then
                createHighlight(character, newPlayer)
            end
        end)
    end)
    
    -- –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º –ø–æ—è–≤–ª–µ–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∏–≥—Ä–æ–∫–æ–≤
    for _, otherPlayer in pairs(Players:GetPlayers()) do
        if otherPlayer ~= Players.LocalPlayer then
            otherPlayer.CharacterAdded:Connect(function(character)
                if chamsEnabled then
                    createHighlight(character, otherPlayer)
                end
            end)
        end
    end
    
    -- –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º –≤—ã—Ö–æ–¥ –∏–≥—Ä–æ–∫–æ–≤
    Players.PlayerRemoving:Connect(function(leftPlayer)
        removeHighlight(leftPlayer)
    end)
end

local function disableChams()
    chamsEnabled = false
    
    -- –£–¥–∞–ª—è–µ–º –≤—Å–µ highlights
    for player, highlight in pairs(playerHighlights) do
        if highlight then
            highlight:Destroy()
        end
    end
    
    playerHighlights = {}
    
    -- –û—Ç–∫–ª—é—á–∞–µ–º –≤—Å–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
    for player, connection in pairs(damageConnections) do
        if connection then
            connection:Disconnect()
        end
    end
    damageConnections = {}
    lastHealthValues = {}
    
    highlightFolder:ClearAllChildren()
end

-- ========== –§–£–ù–ö–¶–ò–Ø –°–ö–†–´–¢–ò–Ø/–ü–û–ö–ê–ó–ê GUI –ü–†–ò –ù–ê–ñ–ê–¢–ò–ò G ==========
local isGUIVisible = true
local isAnimating = false
local savedPosition = MainFrame.Position

local function hideGUI()
    if isAnimating then return end
    isAnimating = true
    
    savedPosition = MainFrame.Position
    
    local tweenInfo = TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
    
    local hideTween = TweenService:Create(MainFrame, tweenInfo, {
        BackgroundTransparency = 1,
        Position = UDim2.new(0.5, -180, 0.5, -150)
    })
    
    for _, child in ipairs(MainFrame:GetDescendants()) do
        if child:IsA("TextLabel") or child:IsA("TextButton") then
            local textTween = TweenService:Create(child, tweenInfo, {TextTransparency = 1})
            textTween:Play()
        end
        if child:IsA("Frame") and child.BackgroundTransparency < 1 then
            local bgTween = TweenService:Create(child, tweenInfo, {BackgroundTransparency = 1})
            bgTween:Play()
        end
        if child:FindFirstChild("UIStroke") then
            local strokeTween = TweenService:Create(child.UIStroke, tweenInfo, {Transparency = 1})
            strokeTween:Play()
        end
    end
    
    local strokeTween = TweenService:Create(UIStroke, tweenInfo, {Transparency = 1})
    strokeTween:Play()
    
    hideTween:Play()
    
    hideTween.Completed:Connect(function()
        MainFrame.Visible = false
        isGUIVisible = false
        isAnimating = false
    end)
end

local function showGUI()
    if isAnimating then return end
    isAnimating = true
    
    MainFrame.Visible = true
    MainFrame.Position = savedPosition
    
    local tweenInfo = TweenInfo.new(0.4, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
    
    local showTween = TweenService:Create(MainFrame, tweenInfo, {
        BackgroundTransparency = 0.1,
        Position = savedPosition
    })
    
    for _, child in ipairs(MainFrame:GetDescendants()) do
        if child:IsA("TextLabel") or child:IsA("TextButton") then
            local textTween = TweenService:Create(child, tweenInfo, {TextTransparency = 0})
            textTween:Play()
        end
        if child:IsA("Frame") and child.BackgroundTransparency < 1 then
            local bgTween = TweenService:Create(child, tweenInfo, {BackgroundTransparency = 0.2})
            bgTween:Play()
        end
        if child:FindFirstChild("UIStroke") then
            local strokeTween = TweenService:Create(child.UIStroke, tweenInfo, {Transparency = 0})
            strokeTween:Play()
        end
    end
    
    local strokeTween = TweenService:Create(UIStroke, tweenInfo, {Transparency = 0})
    strokeTween:Play()
    
    showTween:Play()
    
    showTween.Completed:Connect(function()
        isGUIVisible = true
        isAnimating = false
    end)
end

UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if gameProcessed then return end
    
    if input.KeyCode == Enum.KeyCode.G then
        if isGUIVisible then
            hideGUI()
            print("üîí GUI —Å–∫—Ä—ã—Ç (–Ω–∞–∂–º–∏—Ç–µ G –¥–ª—è –ø–æ–∫–∞–∑–∞)")
        else
            showGUI()
            print("üîì GUI –ø–æ–∫–∞–∑–∞–Ω (–Ω–∞–∂–º–∏—Ç–µ G –¥–ª—è —Å–∫—Ä—ã—Ç–∏—è)")
        end
    end
end)

-- Dragging for MainFrame
local dragging, dragStart, startPos = false
MainFrame.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging, dragStart, startPos = true, input.Position, MainFrame.Position
    end
end)
MainFrame.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = false
    end
end)
UserInputService.InputChanged:Connect(function(input)
    if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
        local delta = input.Position - dragStart
        MainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    end
end)

-- Tab switching
for name, btn in pairs(tabButtons) do
    btn.MouseButton1Click:Connect(function()
        for k, page in pairs(pages) do
            page.Visible = (k == name)
        end
    end)
end

-- ========== AIMBOT –°–ò–°–¢–ï–ú–ê ==========
local aimbotConnection, speedConnection, spinConnection, killAllConnection
local isSpeedActive, isSpinActive = false, false
local currentTarget = nil
local isMouseHeld = false
local lastShootTime = 0

local function holdLeftMouseButton()
    if not isMouseHeld then
        VirtualInputManager:SendMouseButtonEvent(mouse.X, mouse.Y, 0, true, game, 1)
        isMouseHeld = true
    end
end

local function releaseLeftMouseButton()
    if isMouseHeld then
        VirtualInputManager:SendMouseButtonEvent(mouse.X, mouse.Y, 0, false, game, 1)
        isMouseHeld = false
    end
end

local function isPlayerVisible(targetPlayer)
    if not settings.VisibleCheck then return true end
    local camera = Workspace.CurrentCamera
    local targetCharacter = targetPlayer.Character
    if not targetCharacter then return false end
    
    local head = targetCharacter:FindFirstChild("Head")
    if not head then return false end
    
    local rayOrigin = camera.CFrame.Position
    local rayDirection = (head.Position - rayOrigin).Unit * 1000
    
    local ray = Ray.new(rayOrigin, rayDirection)
    local ignoreList = {player.Character, camera}
    local hit, hitPosition = Workspace:FindPartOnRayWithIgnoreList(ray, ignoreList)
    
    if hit then
        local hitCharacter = hit:FindFirstAncestorOfClass("Model")
        return hitCharacter == targetCharacter
    end
    
    return false
end

local function getClosestPlayerInFOV()
    local closestPlayer, closestDistance = nil, settings.FOV
    local camera = Workspace.CurrentCamera
    
    for _, v in pairs(Players:GetPlayers()) do
        if v == player then continue end
        if not v.Character then continue end
        
        local humanoid = v.Character:FindFirstChild("Humanoid")
        if not humanoid or humanoid.Health <= 0 then continue end
        
        local head = v.Character:FindFirstChild("Head")
        if not head then continue end
        
        local screenPoint, onScreen = camera:WorldToViewportPoint(head.Position)
        
        if onScreen then
            local mousePos = Vector2.new(mouse.X, mouse.Y)
            local playerPos = Vector2.new(screenPoint.X, screenPoint.Y)
            local distance = (mousePos - playerPos).Magnitude
            
            if distance <= closestDistance then
                local isVisible = isPlayerVisible(v)
                if isVisible then
                    closestDistance, closestPlayer = distance, v
                end
            end
        end
    end
    return closestPlayer, closestDistance
end

local function aimAtPlayer(target)
    if not target or not target.Character then 
        releaseLeftMouseButton()
        return false 
    end
    
    local camera = Workspace.CurrentCamera
    local targetCharacter = target.Character
    
    local head = targetCharacter:FindFirstChild("Head")
    if not head then 
        releaseLeftMouseButton()
        return false 
    end
    
    local targetPosition = head.Position
    
    local currentCFrame = camera.CFrame
    local targetCFrame = CFrame.lookAt(currentCFrame.Position, targetPosition)
    camera.CFrame = currentCFrame:Lerp(targetCFrame, 0.9)
    
    if settings.AutoShoot then
        local currentTime = tick()
        if currentTime - lastShootTime >= settings.ShootDelay then
            holdLeftMouseButton()
            lastShootTime = currentTime
        end
    end
    
    return true
end

local function startAimbot()
    if aimbotConnection then aimbotConnection:Disconnect() end
    
    aimbotConnection = RunService.RenderStepped:Connect(function()
        if not settings.Enabled then 
            FOVCircle.UIStroke.Color = Color3.fromRGB(255, 0, 0)
            releaseLeftMouseButton()
            return 
        end
        
        local closestPlayer, distance = getClosestPlayerInFOV()
        if closestPlayer then
            local success = aimAtPlayer(closestPlayer)
            if success then
                FOVCircle.UIStroke.Color = Color3.fromRGB(0, 255, 0)
                currentTarget = closestPlayer
            else
                FOVCircle.UIStroke.Color = Color3.fromRGB(255, 255, 0)
                releaseLeftMouseButton()
            end
        else
            FOVCircle.UIStroke.Color = Color3.fromRGB(255, 0, 0)
            releaseLeftMouseButton()
            currentTarget = nil
        end
    end)
end

-- –û—Å—Ç–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (getRandomAlivePlayer, teleportToPlayer, isPlayerAlive, startSpeedGlitch, startSpin, startKillAll)
local function getRandomAlivePlayer()
    local alivePlayers = {}
    for _, v in pairs(Players:GetPlayers()) do
        if v == player then continue end
        if not v.Character then continue end
        local humanoid = v.Character:FindFirstChild("Humanoid")
        if humanoid and humanoid.Health > 0 then
            table.insert(alivePlayers, v)
        end
    end
    return #alivePlayers > 0 and alivePlayers[math.random(1, #alivePlayers)] or nil
end

local function teleportToPlayer(targetPlayer)
    if not targetPlayer or not targetPlayer.Character then return false end
    local targetRoot = targetPlayer.Character:FindFirstChild("HumanoidRootPart")
    local myRoot = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
    if targetRoot and myRoot then
        local offset = Vector3.new(math.random(-5, 5), 0, math.random(-5, 5))
        myRoot.CFrame = targetRoot.CFrame + offset
        return true
    end
    return false
end

local function isPlayerAlive(targetPlayer)
    if not targetPlayer or not targetPlayer.Character then return false end
    local humanoid = targetPlayer.Character:FindFirstChild("Humanoid")
    return humanoid and humanoid.Health > 0
end

local function startSpeedGlitch()
    if speedConnection then speedConnection:Disconnect() end
    isSpeedActive = true
    
    speedConnection = RunService.Heartbeat:Connect(function()
        local character = player.Character
        if character and isSpeedActive then
            local humanoid = character:FindFirstChild("Humanoid")
            local rootPart = character:FindFirstChild("HumanoidRootPart")
            if humanoid and rootPart then
                humanoid.WalkSpeed = 100
                if humanoid.Jump then
                    local camera = Workspace.CurrentCamera
                    local direction = camera.CFrame.LookVector
                    rootPart.Velocity = rootPart.Velocity + direction * 100
                end
            end
        end
    end)
end

local function startSpin()
    if spinConnection then spinConnection:Disconnect() end
    isSpinActive = true
    
    spinConnection = RunService.Heartbeat:Connect(function()
        local character = player.Character
        if character and isSpinActive then
            local rootPart = character:FindFirstChild("HumanoidRootPart")
            if rootPart then
                local currentCFrame = rootPart.CFrame
                local newRotation = currentCFrame * CFrame.Angles(0, math.rad(50), 0)
                rootPart.CFrame = newRotation
            end
        end
    end)
end

local function startKillAll()
    if killAllConnection then 
        killAllConnection:Disconnect()
        killAllConnection = nil
    end
    
    if not settings.KillAllEnabled then return end

    print("üî´ Kill All –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω!")
    
    currentTarget = getRandomAlivePlayer()
    if not currentTarget then
        print("‚ùå –ù–µ—Ç –∂–∏–≤—ã—Ö –∏–≥—Ä–æ–∫–æ–≤!")
        settings.KillAllEnabled = false
        buttonInstances["KILL ALL: OFF"].Text = "KILL ALL: OFF"
        buttonInstances["KILL ALL: OFF"].BackgroundColor3 = Color3.fromRGB(120, 30, 30)
        return
    end
    
    print("üéØ –ü–µ—Ä–≤–∞—è —Ü–µ–ª—å: " .. currentTarget.Name)
    teleportToPlayer(currentTarget)

    killAllConnection = RunService.Heartbeat:Connect(function()
        if not settings.KillAllEnabled then
            if killAllConnection then
                killAllConnection:Disconnect()
                killAllConnection = nil
            end
            print("üî´ Kill All –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω!")
            return
        end
        
        if not isPlayerAlive(currentTarget) then
            currentTarget = getRandomAlivePlayer()
            if currentTarget then
                teleportToPlayer(currentTarget)
                print("üéØ –ù–æ–≤–∞—è —Ü–µ–ª—å: " .. currentTarget.Name)
            else
                print("‚úÖ –í—Å–µ –∏–≥—Ä–æ–∫–∏ –º–µ—Ä—Ç–≤—ã!")
                settings.KillAllEnabled = false
                buttonInstances["KILL ALL: OFF"].Text = "KILL ALL: OFF"
                buttonInstances["KILL ALL: OFF"].BackgroundColor3 = Color3.fromRGB(120, 30, 30)
                return
            end
        end
        
        local myCharacter = player.Character
        local myRoot = myCharacter and myCharacter:FindFirstChild("HumanoidRootPart")
        local targetRoot = currentTarget.Character and currentTarget.Character:FindFirstChild("HumanoidRootPart")
        
        if myRoot and targetRoot then
            local angle = tick() * 10
            local radius = 5
            local x, z = math.cos(angle) * radius, math.sin(angle) * radius
            local offset = Vector3.new(x, 0, z)
            myRoot.CFrame = CFrame.new(targetRoot.Position + offset, targetRoot.Position)
            
            VirtualInputManager:SendMouseButtonEvent(mouse.X, mouse.Y, 0, true, game, 1)
            task.wait(0.1)
            VirtualInputManager:SendMouseButtonEvent(mouse.X, mouse.Y, 0, false, game, 1)
        end
    end)
end

-- ========== –û–ë–†–ê–ë–û–¢–ß–ò–ö–ò –ö–ù–û–ü–û–ö ==========
buttonInstances["AIMBOT: OFF"].MouseButton1Click:Connect(function()
    settings.Enabled = not settings.Enabled
    if settings.Enabled then
        buttonInstances["AIMBOT: OFF"].Text = "AIMBOT: ON"
        buttonInstances["AIMBOT: OFF"].BackgroundColor3 = Color3.fromRGB(50, 150, 50)
        startAimbot()
        print("üéØ –£–õ–£–ß–®–ï–ù–ù–´–ô AimBot –í–ö–õ–Æ–ß–ï–ù (FOV: 100)")
    else
        buttonInstances["AIMBOT: OFF"].Text = "AIMBOT: OFF"
        buttonInstances["AIMBOT: OFF"].BackgroundColor3 = Color3.fromRGB(120, 30, 30)
        if aimbotConnection then aimbotConnection:Disconnect() end
        releaseLeftMouseButton()
        FOVCircle.UIStroke.Color = Color3.fromRGB(255, 0, 0)
        print("üéØ AimBot –í–´–ö–õ–Æ–ß–ï–ù")
    end
end)

buttonInstances["KILL ALL: OFF"].MouseButton1Click:Connect(function()
    settings.KillAllEnabled = not settings.KillAllEnabled

    if settings.KillAllEnabled then
        buttonInstances["KILL ALL: OFF"].Text = "KILL ALL: ON"
        buttonInstances["KILL ALL: OFF"].BackgroundColor3 = Color3.fromRGB(50, 150, 50)
        startKillAll()
        print("‚úÖ Kill All –≤–∫–ª—é—á–µ–Ω!")
    else
        buttonInstances["KILL ALL: OFF"].Text = "KILL ALL: OFF"
        buttonInstances["KILL ALL: OFF"].BackgroundColor3 = Color3.fromRGB(120, 30, 30)
        if killAllConnection then
            killAllConnection:Disconnect()
            killAllConnection = nil
        end
        print("‚ùå Kill All –≤—ã–∫–ª—é—á–µ–Ω!")
    end
end)

buttonInstances["WALL CHECK: OFF"].MouseButton1Click:Connect(function()
    settings.VisibleCheck = not settings.VisibleCheck
    if settings.VisibleCheck then
        buttonInstances["WALL CHECK: OFF"].Text = "WALL CHECK: ON"
        buttonInstances["WALL CHECK: OFF"].BackgroundColor3 = Color3.fromRGB(50, 150, 50)
        print("üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–µ–Ω –í–ö–õ–Æ–ß–ï–ù–ê")
    else
        buttonInstances["WALL CHECK: OFF"].Text = "WALL CHECK: OFF"
        buttonInstances["WALL CHECK: OFF"].BackgroundColor3 = Color3.fromRGB(120, 30, 30)
        print("üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–µ–Ω –í–´–ö–õ–Æ–ß–ï–ù–ê")
    end
end)

buttonInstances["SPEED: OFF"].MouseButton1Click:Connect(function()
    if isSpeedActive then
        if speedConnection then speedConnection:Disconnect() end
        isSpeedActive = false
        buttonInstances["SPEED: OFF"].Text = "SPEED: OFF"
        buttonInstances["SPEED: OFF"].BackgroundColor3 = Color3.fromRGB(120, 30, 30)
        local character = player.Character
        if character then
            local humanoid = character:FindFirstChild("Humanoid")
            if humanoid then humanoid.WalkSpeed = 16 end
        end
        print("üö´ SpeedGlitch –í–´–ö–õ–Æ–ß–ï–ù")
    else
        startSpeedGlitch()
        buttonInstances["SPEED: OFF"].Text = "SPEED: ON"
        buttonInstances["SPEED: OFF"].BackgroundColor3 = Color3.fromRGB(50, 150, 50)
        print("‚ö° SpeedGlitch –í–ö–õ–Æ–ß–ï–ù")
    end
end)

buttonInstances["SPIN: OFF"].MouseButton1Click:Connect(function()
    if isSpinActive then
        if spinConnection then spinConnection:Disconnect() end
        isSpinActive = false
        buttonInstances["SPIN: OFF"].Text = "SPIN: OFF"
        buttonInstances["SPIN: OFF"].BackgroundColor3 = Color3.fromRGB(120, 30, 30)
        print("üåÄ Krutilka –í–´–ö–õ–Æ–ß–ï–ù–ê")
    else
        startSpin()
        buttonInstances["SPIN: OFF"].Text = "SPIN: ON"
        buttonInstances["SPIN: OFF"].BackgroundColor3 = Color3.fromRGB(50, 150, 50)
        print("üåÄ Krutilka –í–ö–õ–Æ–ß–ï–ù–ê")
    end
end)

-- –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ CHAMS
buttonInstances["CHAMS: OFF"].MouseButton1Click:Connect(function()
    settings.ChamsEnabled = not settings.ChamsEnabled
    
    if settings.ChamsEnabled then
        buttonInstances["CHAMS: OFF"].Text = "CHAMS: ON"
        buttonInstances["CHAMS: OFF"].BackgroundColor3 = Color3.fromRGB(50, 150, 50)
        enableChams()
        print("üëÅÔ∏è HIGHLIGHT CHAMS –í–ö–õ–Æ–ß–ï–ù–´!")
        print("üíú –ò–≥—Ä–æ–∫–∏ –ø–æ–¥—Å–≤–µ—á–µ–Ω—ã –º—è–≥–∫–∏–º —Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–º")
        print("üî¥ –ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —É—Ä–æ–Ω–∞ (—É–º–µ–Ω—å—à–µ–Ω–∏–∏ HP) - –∫—Ä–∞—Å–Ω—ã–π —Ü–≤–µ—Ç –Ω–∞ 1.25 —Å–µ–∫—É–Ω–¥—ã")
    else
        buttonInstances["CHAMS: OFF"].Text = "CHAMS: OFF"
        buttonInstances["CHAMS: OFF"].BackgroundColor3 = Color3.fromRGB(120, 30, 30)
        disableChams()
        print("üëÅÔ∏è CHAMS –í–´–ö–õ–Æ–ß–ï–ù–´")
    end
end)

-- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ FOV –∫—Ä—É–≥–∞
mouse.Move:Connect(function()
    FOVCircle.Position = UDim2.new(0, mouse.X - settings.FOV, 0, mouse.Y - settings.FOV)
end)

-- –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ —Å–º–µ–Ω–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
player.CharacterAdded:Connect(function(character)
    print("‚ôªÔ∏è –ü–µ—Ä—Å–æ–Ω–∞–∂ –æ–±–Ω–æ–≤–ª–µ–Ω")
    if settings.Enabled then
        wait(2)
        startAimbot()
    end
end)

print("‚úÖ BANDITS9SCRIPT GUI –∑–∞–≥—Ä—É–∂–µ–Ω!")
print("üéØ –£–õ–£–ß–®–ï–ù–ù–´–ô AimBot: FOV 100, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ª–µ–≤–∞—è –∫–Ω–æ–ø–∫–∞ –º—ã—à–∏")
print("üëÅÔ∏è HIGHLIGHT CHAMS: –º—è–≥–∫–∏–π —Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π + –∫—Ä–∞—Å–Ω—ã–π –ø—Ä–∏ —É—Ä–æ–Ω–µ")
print("üî¥ –ö—Ä–∞—Å–Ω—ã–π —Ü–≤–µ—Ç –¢–û–õ–¨–ö–û –∫–æ–≥–¥–∞ HP —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è")
print("üéÆ –ù–∞–∂–º–∏—Ç–µ G –¥–ª—è —Å–∫—Ä—ã—Ç–∏—è/–ø–æ–∫–∞–∑–∞ GUI")
